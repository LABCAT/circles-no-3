(this["webpackJsonpcircles-no-3"]=this["webpackJsonpcircles-no-3"]||[]).push([[0],{17:function(i,t,e){},30:function(i,t,e){"use strict";e.r(t);var s=e(0),n=e.n(s),o=e(9),a=e.n(o),r=(e(17),e(2));window.p5=r;e(19);var h=e(10),c=e.p+"static/media/circles-no-3.24a5bbf5.ogg",p=e.p+"static/media/circles-no-3.ba7fefd4.mid";var u=function(i){for(var t,e,s=i.length;0!==s;)e=Math.floor(Math.random()*s),t=i[s-=1],i[s]=i[e],i[e]=t;return i},d=e(11),l=e(12),g=function(){function i(t,e,s,n,o,a){Object(d.a)(this,i),this.p=t,this.origpos=this.p.createVector(this.p.width/2,this.p.height/2,0),this.pos=this.origpos.copy(),this.gap=o,this.origang=e,this.ang=e,this.origrad=s,this.rad=s,this.radmult=1,this.size=2*this.rad*this.p.sin(this.p.TWO_PI/n/2)-this.gap,this.sep=n,this.time=0,this.rottime=8,this.movetime=4,this.gathertime=2,this.opacity=0,this.hue=a}return Object(l.a)(i,[{key:"resetTime",value:function(){this.time=0,this.opacity=0}},{key:"clockwise",value:function(){var i=this.p.map(this.p.min(this.time,this.rottime),0,this.rottime,0,1),t=(i=this.easeInExpo(i))*this.p.TWO_PI;this.ang=this.origang+t,this.rad=this.origrad,this.pos=window.p5.Vector.add(this.origpos,this.p.createVector(this.rad*this.p.cos(this.ang),this.rad*this.p.sin(this.ang),0)),this.time+=.001*this.p.deltaTime}},{key:"antiClockwise",value:function(){var i=this.p.map(this.p.min(this.time,this.rottime),0,this.rottime,0,1),t=(i=this.easeInExpo(i))*this.p.TWO_PI;this.ang=this.origang+t,this.rad=this.origrad,this.pos=window.p5.Vector.add(this.origpos,this.p.createVector(this.rad*this.p.cos(-this.ang),this.rad*this.p.sin(-this.ang),0)),this.time+=.001*this.p.deltaTime}},{key:"exit",value:function(){var i=this.p.map(this.time+3.5,this.rottime+this.movetime,this.rottime+this.movetime+this.gathertime,0,1);i=this.p.constrain(i,0,1),i=this.easeInOutCubic(i),this.rad=this.p.map(i,1,0,1.5*this.p.max(this.p.width,this.p.height),this.origrad),this.pos=window.p5.Vector.add(this.origpos,this.p.createVector(this.rad*this.p.cos(this.ang),this.rad*this.p.sin(this.ang),0)),this.time+=.001*this.p.deltaTime}},{key:"enter",value:function(){var i=this.p.map(this.time,this.rottime+this.movetime,this.rottime+this.movetime+this.gathertime,0,1);i=this.p.constrain(i,0,1),i=this.easeInOutCubic(i),this.rad=this.p.map(i,0,1,1.5*this.p.max(this.p.width,this.p.height),this.origrad),this.pos=window.p5.Vector.add(this.origpos,this.p.createVector(this.rad*this.p.cos(this.ang),this.rad*this.p.sin(this.ang),0)),this.time+=.001*this.p.deltaTime}},{key:"draw",value:function(){this.p.strokeWeight(2),this.p.fill(this.hue,100,100,this.opacity),this.p.stroke(this.hue,100,100,2*this.opacity),this.p.circle(this.pos.x,this.pos.y,this.size),this.p.circle(this.pos.x,this.pos.y,this.size/2),this.p.circle(this.pos.x,this.pos.y,this.size/4),this.opacity<.25&&(this.opacity=this.opacity+5e-4)}},{key:"easeOutCubic",value:function(i){return 1-this.p.pow(1-i,3)}},{key:"easeInExpo",value:function(i){return 0===i?0:this.p.pow(2,10*i-10)}},{key:"easeInOutCubic",value:function(i){return i<.5?4*i*i*i:1-this.p.pow(-2*i+2,3)/2}},{key:"easeInQuad",value:function(i){return i*i}},{key:"easeInOutQuint",value:function(i){return i<.5?16*i*i*i*i*i:1-this.p.pow(-2*i+2,5)/2}}]),i}(),m=e(1),v=function(){var i=Object(s.useRef)(),t=function(i){i.canvas=null,i.canvasWidth=window.innerWidth,i.canvasHeight=window.innerHeight,i.audioLoaded=!1,i.songHasFinished=!1,i.player=null,i.PPQ=15360,i.rotatingCircles=[],i.rotatingCircleSize=15,i.numOfRotatingCircles=18,i.parts=[],i.mass=[],i.positionX=[],i.positionY=[],i.velocityX=[],i.velocityY=[],i.loadMidi=function(){h.Midi.fromUrl(p).then((function(t){console.log(t);var e=t.tracks[5].notes,s=t.tracks[1].notes;i.scheduleCueSet(e,"executeCueSet1",!0),i.scheduleCueSet(s,"executeCueSet2"),i.audioLoaded=!0}))},i.preload=function(){i.song=i.loadSound(c,i.loadMidi),i.song.onended(i.logCredits)},i.scheduleCueSet=function(t,e){for(var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1,o=1,a=0;a<t.length;a++){var r=t[a],h=r.ticks,c=r.time;(h!==n||s)&&(r.currentCue=o,i.song.addCue(c,i[e],r),n=h,o++)}},i.setup=function(){i.canvas=i.createCanvas(i.canvasWidth,i.canvasHeight),i.colorMode(i.HSB),i.background(0),i.prepareRotatingCircles(i.rotatingCircleSize)},i.animationSequence=["clockwise","exit","enter","antiClockwise","exit","enter","clockwise","exit","enter","exit"],i.currentAnimationIndex=0,i.draw=function(){if(i.audioLoaded&&i.song.isPlaying()||i.songHasFinished){if(i.background(0),i.swarm)for(var t=0;t<i.mass.length;t++){for(var e=0,s=0,n=0;n<i.mass.length;n++)if(t!=n){var o=i.positionX[n]-i.positionX[t],a=i.positionY[n]-i.positionY[t],r=i.sqrt(o*o+a*a);r<1&&(r=1);var h=(r-320)*i.mass[n]/r;e+=h*o,s+=h*a}i.velocityX[t]=.99*i.velocityX[t]+e*i.mass[t],i.velocityY[t]=.99*i.velocityY[t]+s*i.mass[t]}for(var c=0;c<i.parts.length;c++){i.positionX[c]+=i.velocityX[c],i.positionY[c]+=i.velocityY[c];var p=i.parts[c],u=(p.size,p.hue1),d=p.hue2,l=p.hue3,g=p.hue4,m=p.strokeOpacity;i.strokeWeight(1),i.stroke(0,0,100,m),i.fill(u,100,100,.25),i.ellipse(i.positionX[c],i.positionY[c],2e3*i.parts[c].size,2e3*i.parts[c].size),i.stroke(0,0,100,m),i.fill(d,100,100,.25),i.ellipse(i.positionX[c],i.positionY[c],1e3*i.parts[c].size,1e3*i.parts[c].size),i.stroke(l,100,100,1),i.fill(l,100,100,.25),i.ellipse(i.positionX[c],i.positionY[c],500*i.parts[c].size,500*i.parts[c].size),i.stroke(l,100,100,0),i.fill(g,100,100,.25),i.ellipse(i.positionX[c],i.positionY[c],250*i.parts[c].size,250*i.parts[c].size)}for(var v=0;v<i.rotatingCircles.length;v++){var f=i.rotatingCircles[v];f[i.animationSequence[i.currentAnimationIndex]](),f.draw()}}},i.cueSet1DirectionDown=!1,i.executeCueSet1=function(t){var e=t.currentCue,s=t.ticks;if(s%122880===0&&(i.cueSet1DirectionDown=!i.cueSet1DirectionDown),!i.swarm||e>200){var n=t.midi,o=i.cueSet1DirectionDown?0:122880,a=i.cueSet1DirectionDown?122880:0,r=0,h=i.map(s%122880,o,a,0+i.height/20,i.height-i.height/20);switch(n){case 60:r=i.random(0+i.width/40,i.width/4*1);break;case 62:r=i.random(i.width/4*3,i.width-i.width/40)}i.addNewParticle(n,r,h)}},i.executeCueSet2=function(t){var e=t.currentCue;t.durationTicks>4e3?(i.swarm=!0,i.currentAnimationIndex++,i.parts.forEach((function(i){i.strokeOpacity=0}))):i.swarm=!1;if([3,45].includes(e)){i.currentAnimationIndex++;for(var s=0;s<i.rotatingCircles.length;s++){i.rotatingCircles[s].resetTime()}}},i.hueSet1=[30,60,90,120,150,180],i.hueSet2=[210,240,270,300,330,360],i.addNewParticle=function(t,e,s){var n=i.random(.003,.03),o=[];switch(t){case 60:o=u(i.hueSet2);break;case 62:o=u(i.hueSet1)}i.parts.push({size:n,hue1:o[0],hue2:o[1],hue3:o[2],hue4:o[3],strokeOpacity:1}),i.mass.push(n),i.positionX.push(e),i.positionY.push(s),i.velocityX.push(0),i.velocityY.push(0)},i.prepareRotatingCircles=function(){i.rotatingCircles=[];for(var t=.4*i.min(i.width,i.height),e=0;e<i.numOfRotatingCircles;e++){var s=i.TWO_PI/i.numOfRotatingCircles*(e+.5)+i.PI,n=e*(360/i.numOfRotatingCircles),o=new g(i,s,t,i.numOfRotatingCircles,i.rotatingCircleSize,n);i.rotatingCircles.push(o)}},i.logCredits=function(){i.songHasFinished=!0},i.mousePressed=function(){i.audioLoaded&&(i.song.isPlaying()?i.song.pause():(parseInt(i.song.currentTime()),parseInt(i.song.buffer.duration),i.canvas.addClass("fade-in"),i.song.play()))},i.updateCanvasDimensions=function(){i.canvasWidth=window.innerWidth,i.canvasHeight=window.innerHeight,i.createCanvas(i.canvasWidth,i.canvasHeight),i.redraw()},window.attachEvent?window.attachEvent("onresize",(function(){i.updateCanvasDimensions()})):window.addEventListener&&window.addEventListener("resize",(function(){i.updateCanvasDimensions()}),!0)};return Object(s.useEffect)((function(){new r(t,i.current)}),[]),Object(m.jsx)("div",{ref:i})};var f=function(){return Object(m.jsx)(v,{})};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.965ba5d1.chunk.js.map