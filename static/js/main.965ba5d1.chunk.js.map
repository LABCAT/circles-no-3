{"version":3,"sources":["js/helpers/Globals.js","audio/circles-no-3.ogg","audio/circles-no-3.mid","js/functions/ShuffleArray.js","js/classes/RotatingCircle.js","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","ShuffleArray","array","temporaryValue","randomIndex","currentIndex","length","Math","floor","random","AnimatedCicle","ang","rad","sep","gap","hue","this","p","origpos","createVector","width","height","pos","copy","origang","origrad","radmult","size","sin","TWO_PI","time","rottime","movetime","gathertime","opacity","t","map","min","rotang","easeInExpo","Vector","add","cos","deltaTime","t3","constrain","easeInOutCubic","max","strokeWeight","fill","stroke","circle","x","y","pow","P5SketchWithAudio","sketchRef","useRef","Sketch","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","songHasFinished","player","PPQ","rotatingCircles","rotatingCircleSize","numOfRotatingCircles","parts","mass","positionX","positionY","velocityX","velocityY","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","noteSet2","scheduleCueSet","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","polyMode","lastTicks","currentCue","i","note","ticks","addCue","setup","createCanvas","colorMode","HSB","background","prepareRotatingCircles","animationSequence","currentAnimationIndex","draw","isPlaying","swarm","pA","accelerationX","accelerationY","pB","distanceX","distanceY","distance","sqrt","force","particle","hue1","hue2","hue3","hue4","strokeOpacity","ellipse","cueSet1DirectionDown","executeCueSet1","mapStart1","mapStart2","posX","posY","addNewParticle","executeCueSet2","durationTicks","forEach","includes","resetTime","hueSet1","hueSet2","hueSet","push","PI","RotatingCircle","mousePressed","pause","parseInt","currentTime","buffer","duration","addClass","play","updateCanvasDimensions","redraw","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.965ba5d1.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default __webpack_public_path__ + \"static/media/circles-no-3.24a5bbf5.ogg\";","export default __webpack_public_path__ + \"static/media/circles-no-3.ba7fefd4.mid\";","function ShuffleArray(array) {\n  var currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n\n  // While there remain elements to shuffle...\n  while (currentIndex !== 0) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\nexport default ShuffleArray;\n","\nexport default class AnimatedCicle{\n  constructor(p5, ang, rad, sep, gap, hue){\n    this.p = p5;\n    this.origpos = this.p.createVector(this.p.width / 2, this.p.height / 2,0);\n    this.pos = this.origpos.copy();\n    this.gap = gap;\n    this.origang = ang;\n    this.ang = ang ;\n    this.origrad = rad;\n    this.rad = rad;\n    this.radmult = 1.0;\n    this.size = 2 * this.rad * this.p.sin(this.p.TWO_PI / sep / 2) - this.gap;\n    this.sep = sep;\n    this.time = 0.0;\n    this.rottime = 8.0;\n    this.movetime = 4.0;\n    this.gathertime = 2.0;\n    this.opacity = 0;\n    this.hue = hue;\n  }\n\n  resetTime() {\n    this.time = 0;\n    this.opacity = 0\n  }\n\n  clockwise(){\n    let t = this.p.map(this.p.min(this.time, this.rottime), 0.0, this.rottime, 0.0, 1.0);\n    t = this.easeInExpo(t);\n    let rotang = t * this.p.TWO_PI;\n    this.ang = this.origang + rotang;\n    this.rad = this.origrad;\n    //forward\n    this.pos = window.p5.Vector.add(this.origpos, this.p.createVector(this.rad * this.p.cos(this.ang), this.rad * this.p.sin(this.ang), 0));\n    this.time += this.p.deltaTime * 0.001;\n  }\n\n  antiClockwise(){\n    let t = this.p.map(this.p.min(this.time, this.rottime), 0.0, this.rottime, 0.0, 1.0);\n    t = this.easeInExpo(t);\n    let rotang = t * this.p.TWO_PI;\n    this.ang = this.origang + rotang;\n    this.rad = this.origrad;\n    //reverse\n    this.pos = window.p5.Vector.add(this.origpos, this.p.createVector(this.rad * this.p.cos(-this.ang), this.rad * this.p.sin(-this.ang), 0));\n    this.time += this.p.deltaTime * 0.001;\n  }\n\n  exit(){\n    let t3 = this.p.map(this.time + 3.5, this.rottime + this.movetime, this.rottime + this.movetime + this.gathertime, 0.0, 1.0);\n    t3 = this.p.constrain(t3, 0.0, 1.0);\n    t3 = this.easeInOutCubic(t3);\n    //leave\n    this.rad = this.p.map(t3, 1.0, 0, this.p.max(this.p.width, this.p.height) * 1.5, this.origrad);\n    this.pos = window.p5.Vector.add(this.origpos, this.p.createVector(this.rad * this.p.cos(this.ang), this.rad * this.p.sin(this.ang), 0));\n    this.time += this.p.deltaTime * 0.001;\n  }\n\n  enter(){\n    let t3 = this.p.map(this.time, this.rottime + this.movetime, this.rottime + this.movetime + this.gathertime, 0.0, 1.0);\n    t3 = this.p.constrain(t3, 0.0, 1.0);\n    t3 = this.easeInOutCubic(t3);\n    //enter\n    this.rad = this.p.map(t3, 0, 1.0, this.p.max(this.p.width, this.p.height) * 1.5, this.origrad);\n    this.pos = window.p5.Vector.add(this.origpos, this.p.createVector(this.rad * this.p.cos(this.ang), this.rad * this.p.sin(this.ang), 0));\n    this.time += this.p.deltaTime * 0.001;\n  }\n\n  draw(){\n    this.p.strokeWeight(2);\n    this.p.fill(this.hue, 100, 100, this.opacity);\n    this.p.stroke(this.hue, 100, 100, this.opacity * 2);\n    this.p.circle(this.pos.x, this.pos.y, this.size);\n    this.p.circle(this.pos.x, this.pos.y, this.size / 2);\n    this.p.circle(this.pos.x, this.pos.y, this.size / 4);\n\n    if(this.opacity < 0.25){\n      this.opacity = this.opacity + 0.0005;\n    }\n  }\n\n  easeOutCubic(x) {\n      return 1 - this.p.pow(1 - x, 3);\n  }\n\n  easeInExpo(x) {\n      return x === 0 ? 0 : this.p.pow(2, 10 * x - 10);\n  }\n\n  easeInOutCubic(x) {\n      return x < 0.5 ? 4 * x * x * x : 1 - this.p.pow(-2 * x + 2, 3) / 2;\n  }\n\n  easeInQuad(x) {\n      return x * x;\n  }\n\n  easeInOutQuint(x) {\n      return x < 0.5 ? 16 * x * x * x * x * x : 1 - this.p.pow(-2 * x + 2, 5) / 2;\n  }\n}\n\n\n","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\n\nimport audio from \"../audio/circles-no-3.ogg\";\nimport midi from \"../audio/circles-no-3.mid\";\nimport ShuffleArray from \"./functions/ShuffleArray.js\";\nimport RotatingCircle from \"./classes/RotatingCircle.js\";\n\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.songHasFinished = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.rotatingCircles = [];\n\n        p.rotatingCircleSize = 15;\n\n        p.numOfRotatingCircles = 18;\n\n        p.parts = [];\n\n        p.mass = [];\n        \n        p.positionX = [];\n        \n        p.positionY = [];\n        \n        p.velocityX = [];\n        \n        p.velocityY = [];\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    //const noteSet1 = result.tracks[7].notes.filter(note => note.midi !== 43); // Redrum 1 \n                    const noteSet1 = result.tracks[5].notes; // Synth 1\n                    const noteSet2 = result.tracks[1].notes; // Sampler 2\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1', true);\n                    p.scheduleCueSet(noteSet2, 'executeCueSet2');\n                    p.audioLoaded = true;\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, polyMode = false)  => {\n            let lastTicks = -1, \n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || polyMode){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        } \n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.colorMode(p.HSB);\n            p.background(0);\n            p.prepareRotatingCircles(p.rotatingCircleSize);\n        }\n\n        p.animationSequence = [\n            'clockwise',\n            'exit',\n            'enter',\n            'antiClockwise',\n            'exit',\n            'enter',\n            'clockwise',\n            'exit',\n            'enter',\n            'exit',\n        ];\n\n        p.currentAnimationIndex = 0;\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying() || p.songHasFinished){\n                p.background(0);\n\n                if(p.swarm){\n                    for (let pA = 0; pA < p.mass.length; pA++) {\n                        let accelerationX = 0, accelerationY = 0;\n                        \n                        for (let pB = 0; pB < p.mass.length; pB++) {\n                            if (pA != pB) {\n                                let distanceX = p.positionX[pB] - p.positionX[pA];\n                                let distanceY = p.positionY[pB] - p.positionY[pA];\n\n                                let distance = p.sqrt(distanceX * distanceX + distanceY * distanceY);\n                                if (distance < 1) distance = 1;\n\n                                let force = (distance - 320) * p.mass[pB] / distance;\n                                accelerationX += force * distanceX;\n                                accelerationY += force * distanceY;\n                            }\n                        }\n                        \n                        p.velocityX[pA] = p.velocityX[pA] * 0.99 + accelerationX * p.mass[pA];\n                        p.velocityY[pA] = p.velocityY[pA] * 0.99 + accelerationY * p.mass[pA];\n                    }\n                }\n                \n                for (let particle = 0; particle < p.parts.length; particle++) {\n                    p.positionX[particle] += p.velocityX[particle];\n                    p.positionY[particle] += p.velocityY[particle];\n                    const { size, hue1, hue2, hue3, hue4, strokeOpacity } = p.parts[particle];\n                    p.strokeWeight(1);\n                    p.stroke(0, 0, 100, strokeOpacity);\n                    p.fill(hue1, 100, 100, 0.25);\n                    p.ellipse(p.positionX[particle], p.positionY[particle], p.parts[particle].size * 2000, p.parts[particle].size * 2000);\n                    p.stroke(0, 0, 100, strokeOpacity);\n                    p.fill(hue2, 100, 100, 0.25);\n                    p.ellipse(p.positionX[particle], p.positionY[particle], p.parts[particle].size * 1000, p.parts[particle].size * 1000);\n                    p.stroke(hue3, 100, 100, 1);\n                    p.fill(hue3, 100, 100, 0.25);\n                    p.ellipse(p.positionX[particle], p.positionY[particle], p.parts[particle].size * 500, p.parts[particle].size * 500);\n                    p.stroke(hue3, 100, 100, 0);\n                    p.fill(hue4, 100, 100, 0.25);\n                    p.ellipse(p.positionX[particle], p.positionY[particle], p.parts[particle].size * 250, p.parts[particle].size * 250);\n                }\n\n                for(let i=0; i < p.rotatingCircles.length; i++){\n                    const circle = p.rotatingCircles[i];\n                    circle[p.animationSequence[p.currentAnimationIndex]]();\n                    circle.draw();\n                }\n            }\n        }\n\n        p.cueSet1DirectionDown = false;  \n\n        p.executeCueSet1 = (note) => {\n            const { currentCue, ticks } = note;\n            if(ticks % 122880 === 0) {\n                p.cueSet1DirectionDown = !p.cueSet1DirectionDown;\n            }\n            if(!p.swarm || currentCue > 200){\n                const { midi } = note,\n                    mapStart1 =  p.cueSet1DirectionDown ? 0 : 122880,\n                    mapStart2 =  p.cueSet1DirectionDown ? 122880 : 0;\n                let posX = 0, \n                    posY = p.map(ticks % 122880, mapStart1, mapStart2, 0 + p.height / 20, p.height - p.height / 20);\n                switch (midi) {\n                    case 60:\n                        posX = p.random(0 + p.width / 40, p.width / 4 * 1);\n                        //posX = p.map(ticks, 0, 119040, 0 + p.width / 20,  p.width / 4 * 1);\n                        break;\n                    case 62:\n                        posX = p.random(p.width / 4 * 3, p.width - p.width / 40);\n                        break;\n                    default:\n                        break;\n                }\n                p.addNewParticle(midi, posX, posY);\n            }\n        }\n\n\n        p.executeCueSet2 = (note) => {\n            const { currentCue, durationTicks } = note;\n            if(durationTicks > 4000) {\n                p.swarm = true;\n                p.currentAnimationIndex++;\n                p.parts.forEach(particle => {\n                    particle.strokeOpacity = 0; \n                });\n            }\n            else {\n                p.swarm = false;\n            }\n\n            const changeCues = [3, 45];\n            if(changeCues.includes(currentCue)){\n                p.currentAnimationIndex++;\n                for(let i=0; i < p.rotatingCircles.length; i++){\n                    const circle = p.rotatingCircles[i];\n                    circle.resetTime();\n                }\n            }\n        }\n\n        p.hueSet1 = [30, 60, 90, 120, 150, 180];\n\n        p.hueSet2 = [210, 240, 270, 300, 330, 360];\n\n        p.addNewParticle = (midi, posX, posY) => {\n            let size = p.random(0.003, 0.03);\n            let hueSet = [];\n            switch (midi) {\n                case 60:\n                    hueSet = ShuffleArray(p.hueSet2);\n                    break;\n                case 62:\n                    hueSet = ShuffleArray(p.hueSet1);\n                    break;\n            }\n            p.parts.push(\n                {\n                    size: size,\n                    hue1: hueSet[0],\n                    hue2: hueSet[1],\n                    hue3: hueSet[2],\n                    hue4: hueSet[3],\n                    strokeOpacity: 1\n                } \n            );\n            p.mass.push(size);\n            p.positionX.push(posX);\n            p.positionY.push(posY);\n            p.velocityX.push(0);\n            p.velocityY.push(0);\n        }\n\n        p.prepareRotatingCircles = () => {\n            p.rotatingCircles = [];\n            const rad = p.min(p.width, p.height) * 0.4;\n            for(let i=0; i < p.numOfRotatingCircles; i++){\n                const ang = p.TWO_PI / p.numOfRotatingCircles * (i  + 0.5) + p.PI,\n                    hue = i * (360 / p.numOfRotatingCircles),\n                    circle = new RotatingCircle(p, ang, rad, p.numOfRotatingCircles, p.rotatingCircleSize, hue);\n                p.rotatingCircles.push(circle);\n            }\n        }\n\n        p.logCredits = () => {\n            p.songHasFinished = true;\n        }\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        //p.reset();\n                    }\n                    //document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                }\n            }\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.redraw();\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}